jQuery(function($){function _saveData(name,value){localStorage.setItem(name+".ace",JSON.stringify(value))}function _getData(name){var value=localStorage.getItem(name+".ace")||"{}";try{value=JSON.parse(value)}catch(e){value={}}return value}function _removeData(name){localStorage.removeItem(name+".ace")}$(".cards-container").each(function(index){this.setAttribute("id","card-container-"+(index+1))});$(".card").each(function(index){this.setAttribute("id","card-"+(index+1))});var states=_getData("widget-states");for(var widgetId in states){var state=states[widgetId];if(state=="hidden")$("#"+widgetId).aceWidget("hideFast");else if(state=="shown")$("#"+widgetId).aceWidget("showFast");else if(state=="closed"){$("#"+widgetId).aceWidget("closeFast")}}var containers=_getData("widget-containers");for(var containerId in containers){var containerEl=document.getElementById(containerId);if(!containerEl)continue;var cards=containers[containerId];for(var i=0;i<cards.length;i++){var card=document.getElementById(cards[i]);if(card){containerEl.appendChild(card);card.classList.add("mb-3")}}}document.getElementById("widgets-area").classList.remove("invisible");$(".cards-container").each(function(){Sortable.create(this,{group:"widgets",draggable:"> .card",animation:200,ghostClass:"brc-grey-m1",chosenClass:"",dragClass:"bgc-yellow-m2",handle:"ontouchstart"in window?".card-header":null,onEnd:function(evt){var containers=_getData("widget-containers");containers[evt.to.id]=[];containers[evt.from.id]=[];$("#"+evt.to.id).find("> .card").each(function(){containers[evt.to.id].push(this.id)});$("#"+evt.from.id).find("> .card").each(function(){containers[evt.from.id].push(this.id)});_saveData("widget-containers",containers);var newPrevSibling=evt.item.previousElementSibling;if(newPrevSibling&&newPrevSibling.classList.contains("card")){newPrevSibling.classList.add("mb-3")}evt.item.classList.add("mb-3")}})});function saveWidgetState(id,state){var states=_getData("widget-states");states[id]=state;_saveData("widget-states",states)}$(".card").on("hidden.ace.widget",function(){saveWidgetState(this.id,"hidden")}).on("shown.ace.widget",function(){saveWidgetState(this.id,"shown")}).on("closed.ace.widget",function(){saveWidgetState(this.id,"closed")});$("#reset-1, #reset-2").on("click",function(){_removeData("widget-containers");_removeData("widget-states");document.location.reload()});setTimeout(function(){try{var _scroller=document.querySelector('.card div[class*="ace-scroll"]');_scroller.style.maxHeight=_scroller.parentNode.clientHeight+"px";_scroller.closest(".card").classList.remove("h-100")}catch(e){}},10)});