
const tarjeta = document.querySelector('#tarjeta1'),
	  //btnAbrirFormulario = document.querySelector('#btn-abrir-formulario'),
	  formulario = document.querySelector('#formulario-tarjeta1'),
	  numeroTarjeta = document.querySelector('#tarjeta1 .numero'),
	  nombreTarjeta = document.querySelector('#tarjeta1 .nombre'),
	  logoMarca = document.querySelector('#logo-marca1'),
	  firma = document.querySelector('#tarjeta1 .firma p'),
	  mesExpiracion = document.querySelector('#tarjeta1 .mes'),
	  yearExpiracion = document.querySelector('#tarjeta1 .year');
	  ccv = document.querySelector('#tarjeta1 .ccv');


// * Volteamos la tarjeta para mostrar el frente.
const mostrarFrente = () => {
	if(tarjeta.classList.contains('active')){
		tarjeta.classList.remove('active');
	}
}

// * Rotacion de la tarjeta
tarjeta.addEventListener('click', () => {
	tarjeta.classList.toggle('active');
});

// * Boton de abrir formulario
/*btnAbrirFormulario.addEventListener('click', () => {
	btnAbrirFormulario.classList.toggle('active');
	formulario.classList.toggle('active');
});*/



// * Select del mes generado dinamicamente.
for(let i = 1; i <= 12; i++){
    let opcion = document.createElement('option');
    if(i < 10){
        opcion.value = "0" + i;
        opcion.innerText = "0" + i;
    }else{
        opcion.value = i;
        opcion.innerText = i;
    }
    this.selectMes1.append(opcion);
}

// * Select del año generado dinamicamente.
const yearActual = new Date().getFullYear();

for(let i = yearActual; i <= yearActual + 8; i++){
    let opcion = document.createElement('option');
    opcion.value = i;
    opcion.innerText = i;
    this.selectYear1.append(opcion);
}

// * Input numero de tarjeta
this.inputNumero1.addEventListener('keyup', (e) => {
    let valorInput = e.target.value;

    this.inputNumero1.value = valorInput
        // Eliminamos espacios en blanco
        .replace(/\s/g, '')
        // Eliminar las letras
        .replace(/\D/g, '')
        // Ponemos espacio cada cuatro numeros
        .replace(/([0-9]{4})/g, '$1 ')
        // Elimina el ultimo espaciado
        .trim();

    numeroTarjeta.textContent = valorInput;

    if(valorInput == ''){
        numeroTarjeta.textContent = '#### #### #### ####';

        logoMarca.innerHTML = '';
    }

    // Obtener la ruta del servidor
    // Obtener la URL actual
    var wwwUrlPath = window.document.location.href;
    var pathName = window.document.location.pathname;
    var pos = wwwUrlPath.indexOf(pathName);

    if(valorInput[0] == 3){
        logoMarca.innerHTML = '';
        const imagen = document.createElement('img');
        imagen.src = base_path+'/estilos/node_modules/PayCards/img/logos/american.png';
        logoMarca.appendChild(imagen);
    } else if(valorInput[0] == 4){
        logoMarca.innerHTML = '';
        const imagen = document.createElement('img');
        imagen.src = base_path+'/estilos/node_modules/PayCards/img/logos/visa.png';
        logoMarca.appendChild(imagen);
    } else if(valorInput[0] == 5){
        logoMarca.innerHTML = '';
        const imagen = document.createElement('img');
        imagen.src = base_path+'/estilos/node_modules/PayCards/img/logos/mastercard.png';
        logoMarca.appendChild(imagen);
    }

    // Volteamos la tarjeta para que el usuario vea el frente.
    mostrarFrente();
});

// * Input nombre de tarjeta
this.inputNombre1.addEventListener('keyup', (e) => {
    let valorInput = e.target.value;

    this.inputNombre1.value = valorInput.replace(/[0-9]/g, '');
    nombreTarjeta.textContent = valorInput;
    firma.textContent = valorInput;

    if(valorInput == ''){
        nombreTarjeta.textContent = '';
    }

    mostrarFrente();
});


// * Select mes
this.selectMes1.addEventListener('change', (e) => {
    mesExpiracion.textContent = e.target.value;
    mostrarFrente();
});


// * Select Año
this.selectYear1.addEventListener('change', (e) => {
    yearExpiracion.textContent = e.target.value.slice(2);
    mostrarFrente();
});

// * CCV
this.inputCCV1.addEventListener('keyup', () => {
    if(!tarjeta.classList.contains('active')){
        tarjeta.classList.toggle('active');
    }

    this.inputCCV1.value = this.inputCCV1.value
        // Eliminar los espacios
        .replace(/\s/g, '')
        // Eliminar las letras
        .replace(/\D/g, '');
    ccv1.textContent = this.inputCCV1.value;
});




//////////////////////////////////////////////2
const tarjeta2 = document.querySelector('#tarjeta2'),
    //btnAbrirFormulario = document.querySelector('#btn-abrir-formulario'),
    formulario2 = document.querySelector('#formulario-tarjeta2'),
    numeroTarjeta2 = document.querySelector('#tarjeta2 .numero'),
    nombreTarjeta2 = document.querySelector('#tarjeta2 .nombre'),
    logoMarca2 = document.querySelector('#logo-marca2'),
    firma2 = document.querySelector('#tarjeta2 .firma p'),
    mesExpiracion2 = document.querySelector('#tarjeta2 .mes'),
    yearExpiracion2 = document.querySelector('#tarjeta2 .year');
    ccv2 = document.querySelector('#tarjeta2 #ccv2');


// * Volteamos la tarjeta para mostrar el frente.
const mostrarFrente2 = () => {
    if(tarjeta2.classList.contains('active')){
        tarjeta2.classList.remove('active');
    }
}

// * Rotacion de la tarjeta
tarjeta2.addEventListener('click', () => {
    tarjeta2.classList.toggle('active');
});

// * Boton de abrir formulario
/*btnAbrirFormulario.addEventListener('click', () => {
	btnAbrirFormulario.classList.toggle('active');
	formulario.classList.toggle('active');
});*/



// * Select del mes generado dinamicamente.
for(let i = 1; i <= 12; i++){
    let opcion = document.createElement('option');
    if(i < 10){
        opcion.value = "0" + i;
        opcion.innerText = "0" + i;
    }else{
        opcion.value = i;
        opcion.innerText = i;
    }
    this.selectMes2.append(opcion);
}


for(let i = yearActual; i <= yearActual + 8; i++){
    let opcion = document.createElement('option');
    opcion.value = i;
    opcion.innerText = i;
    this.selectYear2.append(opcion);
}

// * Input numero de tarjeta
this.inputNumero2.addEventListener('keyup', (e) => {
    let valorInput = e.target.value;

    this.inputNumero2.value = valorInput
        // Eliminamos espacios en blanco
        .replace(/\s/g, '')
        // Eliminar las letras
        .replace(/\D/g, '')
        // Ponemos espacio cada cuatro numeros
        .replace(/([0-9]{4})/g, '$1 ')
        // Elimina el ultimo espaciado
        .trim();

    numeroTarjeta2.textContent = valorInput;

    if(valorInput == ''){
        numeroTarjeta2.textContent = '#### #### #### ####';

        logoMarca2.innerHTML = '';
    }

    // Obtener la ruta del servidor
    // Obtener la URL actual
    var wwwUrlPath = window.document.location.href;
    var pathName = window.document.location.pathname;
    var pos = wwwUrlPath.indexOf(pathName);

    if(valorInput[0] == 3){
        logoMarca2.innerHTML = '';
        const imagen = document.createElement('img');
        imagen.src = base_path+'/estilos/node_modules/PayCards/img/logos/american.png';
        logoMarca2.appendChild(imagen);
    } else if(valorInput[0] == 4){
        logoMarca2.innerHTML = '';
        const imagen = document.createElement('img');
        imagen.src = base_path+'/estilos/node_modules/PayCards/img/logos/visa.png';
        logoMarca2.appendChild(imagen);
    } else if(valorInput[0] == 5){
        logoMarca2.innerHTML = '';
        const imagen = document.createElement('img');
        imagen.src = base_path+'/estilos/node_modules/PayCards/img/logos/mastercard.png';
        logoMarca2.appendChild(imagen);
    }

    // Volteamos la tarjeta para que el usuario vea el frente.
    mostrarFrente2();
});

// * Input nombre de tarjeta
this.inputNombre2.addEventListener('keyup', (e) => {
    let valorInput = e.target.value;

    this.inputNombre2.value = valorInput.replace(/[0-9]/g, '');
    nombreTarjeta2.textContent = valorInput;
    firma2.textContent = valorInput;

    if(valorInput == ''){
        nombreTarjeta2.textContent = '';
    }

    mostrarFrente2();
});


// * Select mes
this.selectMes2.addEventListener('change', (e) => {
    mesExpiracion2.textContent = e.target.value;
    mostrarFrente();
});


// * Select Año
this.selectYear2.addEventListener('change', (e) => {
    yearExpiracion2.textContent = e.target.value.slice(2);
    mostrarFrente();
});

// * CCV
this.inputCCV2.addEventListener('keyup', () => {
    if(!tarjeta2.classList.contains('active')){
        tarjeta2.classList.toggle('active');
    }

    this.inputCCV2.value = this.inputCCV2.value
        // Eliminar los espacios
        .replace(/\s/g, '')
        // Eliminar las letras
        .replace(/\D/g, '');
    ccv2.textContent = this.inputCCV2.value;
});




//////////////////////////////////////////////2
const tarjeta3 = document.querySelector('#tarjeta3'),
    //btnAbrirFormulario = document.querySelector('#btn-abrir-formulario'),
    formulario3 = document.querySelector('#formulario-tarjeta3'),
    numeroTarjeta3 = document.querySelector('#tarjeta3 .numero'),
    nombreTarjeta3 = document.querySelector('#tarjeta3 .nombre'),
    logoMarca3 = document.querySelector('#logo-marca3'),
    firma3 = document.querySelector('#tarjeta3 .firma p'),
    mesExpiracion3 = document.querySelector('#tarjeta3 .mes'),
    yearExpiracion3 = document.querySelector('#tarjeta3 .year');
ccv3 = document.querySelector('#tarjeta3 #ccv3');


// * Volteamos la tarjeta para mostrar el frente.
const mostrarFrente3 = () => {
    if(tarjeta3.classList.contains('active')){
        tarjeta3.classList.remove('active');
    }
}

// * Rotacion de la tarjeta
try {
    tarjeta3.addEventListener('click', () => {
        tarjeta3.classList.toggle('active');
    });
}catch(Exception){

}
